(this["webpackJsonpomahq-fe"]=this["webpackJsonpomahq-fe"]||[]).push([[5],{274:function(e,t,n){e.exports=function(){"use strict";return function(e,t,n){var c=t.prototype,r=c.format;n.en.ordinal=function(e){var t=["th","st","nd","rd"],n=e%100;return"["+e+(t[(n-20)%10]||t[n]||t[0])+"]"},c.format=function(e){var t=this,n=this.$locale(),c=this.$utils(),a=(e||"YYYY-MM-DDTHH:mm:ssZ").replace(/\[([^\]]+)]|Q|wo|ww|w|WW|W|zzz|z|gggg|GGGG|Do|X|x|k{1,2}|S/g,(function(e){switch(e){case"Q":return Math.ceil((t.$M+1)/3);case"Do":return n.ordinal(t.$D);case"gggg":return t.weekYear();case"GGGG":return t.isoWeekYear();case"wo":return n.ordinal(t.week(),"W");case"w":case"ww":return c.s(t.week(),"w"===e?1:2,"0");case"W":case"WW":return c.s(t.isoWeek(),"W"===e?1:2,"0");case"k":case"kk":return c.s(String(0===t.$H?24:t.$H),"k"===e?1:2,"0");case"X":return Math.floor(t.$d.getTime()/1e3);case"x":return t.$d.getTime();case"z":return"["+t.offsetName()+"]";case"zzz":return"["+t.offsetName("long")+"]";default:return e}}));return r.bind(this)(a)}}}()},279:function(e,t,n){"use strict";n.r(t);var c=n(18),r=n.n(c),a=n(20),s=n(29),i=n(10),o=n(37),l=n.n(o),d=n(274),u=n.n(d),f=n(1),b=n(152),j=n(58),x=n(42),m=n(43),h=n(151),v=n(2);l.a.extend(u.a);t.default=function(e){var t=e.item,n=e.showModal,c=e.setShowModal,o=e.onAdd,d=e.onTake,u=Object(f.useState)(!1),g=Object(i.a)(u,2),O=g[0],w=g[1],p=Object(f.useState)(!1),y=Object(i.a)(p,2),k=y[0],N=y[1],M=Object(f.useRef)(),W=Object(f.useRef)(),z=Object(f.useState)([]),G=Object(i.a)(z,2),Y=G[0],$=G[1],S=Object(f.useState)(0),D=Object(i.a)(S,2),H=D[0],T=D[1],q=Object(b.a)({threshold:0}),C=q.ref,E=q.inView;Object(f.useEffect)((function(){n&&function(){var e=Object(s.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.get("/transaction/byitem/".concat(null===t||void 0===t?void 0:t.id,"?type=all&limit=20&page=").concat(H)).then((function(e){var t=e.data;$((function(e){return[].concat(Object(a.a)(e),Object(a.a)(t.transactions.filter((function(t,n){return!e.find((function(e){return e.id===t.id}))&&t.id}))))})),N(t.has_more),w(!1)})).catch((function(e){return console.log(e)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[H,t,n]);var R=Object(f.useCallback)((function(){!O&&k&&(w(!0),T((function(e){return e+1})))}),[O,k]);Object(f.useEffect)((function(){E&&R()}),[E,R]);return Object(v.jsx)(j.a,{in:n,timeout:300,unmountOnExit:!0,nodeRef:M,classNames:"modal-lg",children:Object(v.jsx)(x.f,{ref:M,closing:function(){c(!1),N(!1),T(0),$([])},title:null===t||void 0===t?void 0:t.name,children:Object(v.jsxs)("div",{className:"flex flex-col px-1",children:[Object(v.jsxs)("div",{className:"flex flex-row space-x-2",children:[Object(v.jsx)("div",{className:"w-24 h-36 sm:w-36 sm:h-36 bg-gray-500 rounded-xl mr-2 overflow-hidden",children:Object(v.jsx)("img",{src:null===t||void 0===t?void 0:t.image,alt:"",className:"h-full w-full object-cover object-center"})}),Object(v.jsxs)("div",{className:"flex flex-col flex-1 text-gray-900 dark:text-gray-100",children:[Object(v.jsx)("div",{className:"text-sm font-semibold",children:null===t||void 0===t?void 0:t.barcode}),Object(v.jsx)("div",{className:"text-xs flex-1",children:null===t||void 0===t?void 0:t.description}),Object(v.jsxs)("div",{className:"w-full flex flex-row justify-between",children:[Object(v.jsxs)("div",{className:"text-base",children:[null===t||void 0===t?void 0:t.quantity," pcs"]}),Object(v.jsxs)("div",{className:"space-x-2",children:[Object(v.jsx)("button",{onClick:function(e){d()},className:"px-2 py-1 text-gray-900 font-medium bg-yellow-200 hover:bg-yellow-300 active:bg-yellow-100 transition duration-300 focus:outline-none text-sm rounded-lg",children:"Take 1"}),Object(v.jsx)("button",{onClick:function(e){o()},className:"px-2 py-1 text-gray-900 font-medium bg-green-200 hover:bg-green-300 active:bg-green-100 transition duration-300 focus:outline-none text-sm rounded-lg",children:"Add"})]})]})]})]}),Object(v.jsxs)("div",{className:"h-80 max-h-80 relative bg-gray-300 dark:bg-gray-600 text-gray-900 dark:text-gray-100 mt-2 rounded-lg overflow-hidden",ref:W,children:[O?Object(v.jsx)("div",{className:"inset-0 z-20 absolute backdrop-filter backdrop-blur-sm flex justify-center items-center",children:Object(v.jsx)(x.e,{})}):void 0,Object(v.jsx)("div",{className:"h-full px-2 py-1 overflow-y-scroll",children:Object(v.jsx)("table",{className:"w-full",children:Object(v.jsxs)("tbody",{children:[Y.map((function(e,t){var n,c="ti"===e.transaction_code,r=l()(e.created_at);return Object(v.jsxs)("tr",{children:[Object(v.jsx)("td",{children:c?null===(n=e.store)||void 0===n?void 0:n.name:"Used @ ".concat(r.format("MMM Do, YY"))}),Object(v.jsx)("td",{children:c?h.a.format(e.price):r.format("HH:mm:ss")})]},t)})),Object(v.jsx)("tr",{ref:C})]})})})]})]})})})}}}]);
//# sourceMappingURL=5.9cd207eb.chunk.js.map